<?xml version="1.0" encoding="UTF-8"?>
<Rules xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.ibm.com/mobility/rule/VehicleActionRule.xsd">
        <VehicleActionRule>
			<RuleType>{alert_rule_id}</RuleType>
			<RuleID>{alert_rule_id}</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.accel.MovingAverageAcceleration</ComplexMethodClass>
					<InitParameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</InitParameter>
				</Exec>
			</Execution>
			<Condition>
				<ValueCondition>
					<Attribute object="CarProbe">RuleID</Attribute>
					<Operator>EQ</Operator>
					<Value>1</Value>
				</ValueCondition> 
			</Condition>
			<Action>
				<VehicleAction>
					<Message>GetStates</Message>
					<Parameter>
						<Key>Speed</Key>
						<Value>Vehicle.Edge.*Speed</Value>
					</Parameter>	
					<Parameter>
						<Key>Acceleration</Key>
						<Value>Vehicle.Edge.*Accel</Value>
					</Parameter>					
					<Parameter>
						<Key>AvgSpeed</Key>
						<Value>Vehicle.Edge.*AvgSpeed</Value>
					</Parameter>	
					<Parameter>
						<Key>AvgAccel</Key>
						<Value>Vehicle.Edge.*AvgAccel</Value>
					</Parameter>
				</VehicleAction>
			</Action>
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- Accel (GE 4.0) -->
		<!-- ************************************* -->	
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>11</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.accel.MovingAverageAcceleration</ComplexMethodClass>
					<InitParameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</InitParameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgAccel@double</Attribute>
					<Operator>GE</Operator>
					<Value>4.0</Value>
				</ValueCondition>							
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Harsh acceleration</Message>
					<Parameter><Key>mo_id</Key><Value>CarProbe.Vehicle_id_ext</Value></Parameter>
					<Parameter><Key>message_type</Key><Value>harsh_acceleration</Value></Parameter>
					<Parameter><Key>source_id</Key><Value>harsh_acceleration</Value></Parameter>
					<Parameter><Key>longitude</Key><Value>CarProbe.Longitude</Value></Parameter>
					<Parameter><Key>latitude</Key><Value>CarProbe.Latitude</Value></Parameter>
					<Parameter><Key>severity</Key><Value>High</Value></Parameter>
					<Parameter><Key>timestamp</Key><Value>CarProbe.timestamp</Value></Parameter>
					<Parameter><Key>ts</Key><Value>CarProbe.ts</Value></Parameter>
					<Parameter><Key>Average acceleration</Key><Value>Vehicle.Edge.*AvgAccel</Value></Parameter>
				</VehicleAction>						
			</Action>
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- Accel (LE -4.0) -->
		<!-- ************************************* -->	
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>12</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.accel.MovingAverageAcceleration</ComplexMethodClass>
					<InitParameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</InitParameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgAccel@double</Attribute>
					<Operator>LE</Operator>
					<Value>-4.0</Value>
				</ValueCondition>							
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Harsh break</Message>
					<Parameter><Key>mo_id</Key><Value>CarProbe.Vehicle_id_ext</Value></Parameter>
					<Parameter><Key>message_type</Key><Value>harsh_break</Value></Parameter>
					<Parameter><Key>source_id</Key><Value>harsh_break</Value></Parameter>
					<Parameter><Key>longitude</Key><Value>CarProbe.Longitude</Value></Parameter>
					<Parameter><Key>latitude</Key><Value>CarProbe.Latitude</Value></Parameter>
					<Parameter><Key>severity</Key><Value>High</Value></Parameter>
					<Parameter><Key>timestamp</Key><Value>CarProbe.timestamp</Value></Parameter>
					<Parameter><Key>ts</Key><Value>CarProbe.ts</Value></Parameter>
					<Parameter><Key>Average acceleration</Key><Value>Vehicle.Edge.*AvgAccel</Value></Parameter>
				</VehicleAction>						
			</Action>
		</VehicleActionRule>		
</Rules>