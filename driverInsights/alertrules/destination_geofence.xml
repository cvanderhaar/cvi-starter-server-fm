<!--
   Copyright 2019 IBM Corp. All Rights Reserved.

   Licensed under the IBM License, a copy of which may be obtained at:

   https://github.com/ibm-watson-iot/iota-starter-server-fm-saas/blob/master/LICENSE

   You may not use this file except in compliance with the license.
-->
<Rules>
<VehicleActionRule>
		<RuleID>{alert_rule_id}</RuleID>
		<RuleType>{alert_rule_type}</RuleType>
  	<Name>Geofence rule for approaching destination</Name>
   	<Description></Description>
		<Condition pattern="geofence">
			<LocationCondition range="in">
				<CenterLatitude object="Vehicle">DEST_LAT</CenterLatitude>
				<CenterLongitude object="Vehicle">DEST_LON</CenterLongitude>
				<Radius>500</Radius>
			</LocationCondition>
		</Condition>
	  <Action>
      <VehicleAction>
				<Message>Approaching the destination</Message>
				<Parameter><Key>mo_id</Key><Value>CarProbe.Vehicle_id_ext</Value></Parameter>
				<Parameter><Key>message_type</Key><Value>geofence</Value></Parameter>
				<Parameter><Key>source_id</Key><Value>CarProbe.Vehicle_id_ext</Value></Parameter>
				<Parameter><Key>longitude</Key><Value>CarProbe.Longitude</Value></Parameter>
				<Parameter><Key>latitude</Key><Value>CarProbe.Latitude</Value></Parameter>
				<Parameter><Key>timestamp</Key><Value>CarProbe.timestamp</Value></Parameter>
				<Parameter><Key>ts</Key><Value>CarProbe.ts</Value></Parameter>
      </VehicleAction>
  	</Action>
	</VehicleActionRule>
</Rules>
