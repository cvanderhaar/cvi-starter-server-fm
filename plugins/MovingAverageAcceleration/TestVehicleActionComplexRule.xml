<Rules>
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>1</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>
			<Condition>
				<ValueCondition>
					<Attribute object="CarProbe">RuleID</Attribute>
					<Operator>EQ</Operator>
					<Value>1</Value>
				</ValueCondition> 
			</Condition>
			<Action>
				<VehicleAction>
					<Message>GetStates</Message>
					<Parameter>
						<Key>Speed</Key>
						<Value>Vehicle.Edge.*Speed</Value>
					</Parameter>	
					<Parameter>
						<Key>Accel</Key>
						<Value>Vehicle.Edge.*Accel</Value>
					</Parameter>					
					<Parameter>
						<Key>AvgSpeed</Key>
						<Value>Vehicle.Edge.*AvgSpeed</Value>
					</Parameter>	
					<Parameter>
						<Key>AvgAccel</Key>
						<Value>Vehicle.Edge.*AvgAccel</Value>
					</Parameter>					
				</VehicleAction>
			</Action>
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- Speed: 0-40 -->
		<!-- ************************************* -->
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>3</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgSpeed@double</Attribute>
					<Operator>GE</Operator>
					<Value>0.0</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgSpeed@double</Attribute>
					<Operator>LT</Operator>
					<Value>40.0</Value>
				</ValueCondition>
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Notify Speed:0-40</Message>
					<Parameter>
						<Key>AvgSpeed</Key>
						<Value>Vehicle.Edge.*AvgSpeed</Value>
					</Parameter>					
				</VehicleAction>
			</Action>			
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- Speed: 40-80 -->
		<!-- ************************************* -->
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>5</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgSpeed@double</Attribute>
					<Operator>GE</Operator>
					<Value>40.0</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgSpeed@double</Attribute>
					<Operator>LT</Operator>
					<Value>80.0</Value>
				</ValueCondition>
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Notify Speed:40-80</Message>
					<Parameter>
						<Key>AvgSpeed</Key>
						<Value>Vehicle.Edge.*AvgSpeed</Value>
					</Parameter>					
				</VehicleAction>
			</Action>			
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- Speed: 80-120 -->
		<!-- ************************************* -->
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>7</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgSpeed@double</Attribute>
					<Operator>GE</Operator>
					<Value>80.0</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgSpeed@double</Attribute>
					<Operator>LT</Operator>
					<Value>120.0</Value>
				</ValueCondition>
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Notify Speed:80-120</Message>
					<Parameter>
						<Key>AvgSpeed</Key>
						<Value>Vehicle.Edge.*AvgSpeed</Value>
					</Parameter>					
				</VehicleAction>
			</Action>			
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- Boot = true -->
		<!-- ************************************* -->
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>8</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="CarProbe">Boot</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Notify Boot=true</Message>
				</VehicleAction>
				<VehicleAction>
					<State>Edge</State>
					<Parameter>
						<Key>BootLon</Key>
						<Value>CarProbe.Longitude</Value>
					</Parameter>
					<Parameter>
						<Key>BootLat</Key>
						<Value>CarProbe.Latitude</Value>
					</Parameter>
					<Parameter>
						<Key>SpeedUp@boolean</Key>
						<Value>false</Value>
					</Parameter>								
					<Parameter>
						<Key>SlowDown@boolean</Key>
						<Value>false</Value>
					</Parameter>								
				</VehicleAction>			
			</Action>
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- Starting -->
		<!-- ************************************* -->
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>9</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.BootLon@double</Attribute>
					<Operator>GE</Operator>
					<Value>-180.0</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">[$distance(CarProbe.Longitude,CarProbe.Latitude,Vehicle.Edge.BootLon@double,Vehicle.Edge.BootLat@double)]</Attribute>
					<Operator>GE</Operator>
					<Value>0.5</Value>
				</ValueCondition>				
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Notify StartMoving</Message>
					<Parameter>
						<Key>Distance</Key>
						<Value>[$distance(CarProbe.Longitude,CarProbe.Latitude,Vehicle.Edge.BootLon@double,Vehicle.Edge.BootLat@double)]</Value>
					</Parameter>					
				</VehicleAction>
				<VehicleAction>
					<State>Edge</State>
					<Remove>
						<Key>BootLon</Key>
					</Remove>
					<Remove>
						<Key>BootLat</Key>
					</Remove>
					<Parameter>
						<Key>Active@boolean</Key>
						<Value>true</Value>
					</Parameter>			
				</VehicleAction>			
			</Action>
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- Stopping (Speed == 0) -->
		<!-- ************************************* -->	
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>10</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.Active@boolean</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>			
				<ValueCondition>
					<Attribute object="CarProbe">Speed</Attribute>
					<Operator>EQ</Operator>
					<Value>0</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.Active@boolean</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>				
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Notify Stopping</Message>
				</VehicleAction>			
			</Action>
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- Accel (GE 2.0) -->
		<!-- ************************************* -->	
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>11</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgAccel@double</Attribute>
					<Operator>GE</Operator>
					<Value>2.0</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.SpeedUp@boolean</Attribute>
					<Operator>NE</Operator>
					<Value>true</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.Active@boolean</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>							
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Notify Accel GE 2</Message>
					<Parameter>
						<Key>AvgAccel</Key>
						<Value>Vehicle.Edge.*AvgAccel</Value>
					</Parameter>
				</VehicleAction>			
				<VehicleAction>
					<State>Edge</State>
					<Parameter>
						<Key>SpeedUp@boolean</Key>
						<Value>true</Value>
					</Parameter>
				</VehicleAction>			
			</Action>
		</VehicleActionRule>
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>12</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgAccel@double</Attribute>
					<Operator>LT</Operator>
					<Value>2.0</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.SpeedUp@boolean</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.Active@boolean</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>							
			</Condition>
			<Action>
				<VehicleAction>
					<State>Edge</State>
					<Parameter>
						<Key>SpeedUp@boolean</Key>
						<Value>false</Value>
					</Parameter>
				</VehicleAction>			
			</Action>
		</VehicleActionRule>		
		<!-- ************************************* -->
		<!-- Accel (LE -2.0) -->
		<!-- ************************************* -->	
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>13</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgAccel@double</Attribute>
					<Operator>LE</Operator>
					<Value>-2.0</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.SlowDown@boolean</Attribute>
					<Operator>NE</Operator>
					<Value>true</Value>
				</ValueCondition>	
				<ValueCondition>
					<Attribute object="Vehicle">Edge.Active@boolean</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>							
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Notify Accel LE -2</Message>
					<Parameter>
						<Key>AvgAccel</Key>
						<Value>Vehicle.Edge.*AvgAccel</Value>
					</Parameter>
				</VehicleAction>
				<VehicleAction>
					<State>Edge</State>
					<Parameter>
						<Key>SlowDown@boolean</Key>
						<Value>true</Value>
					</Parameter>
				</VehicleAction>
			</Action>
		</VehicleActionRule>
        <VehicleActionRule>
			<RuleType>1</RuleType>
			<RuleID>14</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.*AvgAccel@double</Attribute>
					<Operator>GT</Operator>
					<Value>-2.0</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.SlowDown@boolean</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.Active@boolean</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>							
			</Condition>
			<Action>
				<VehicleAction>
					<State>Edge</State>
					<Parameter>
						<Key>SlowDown@boolean</Key>
						<Value>false</Value>
					</Parameter>
				</VehicleAction>
			</Action>
		</VehicleActionRule>
		<!-- ************************************* -->
		<!-- LaneChange -->
		<!-- ************************************* -->	
        <VehicleActionRule>
			<RuleType>2</RuleType>
			<RuleID>15</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="CarProbe">LaneChange</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>
			</Condition>
			<Action>
				<VehicleAction>
					<Message>Lane was Changed</Message>
				</VehicleAction>
			</Action>
		</VehicleActionRule>			
		<!-- ************************************* -->
		<!-- RoadSign -->
		<!-- ************************************* -->	
        <VehicleActionRule>
			<RuleType>3</RuleType>
			<RuleID>16</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="CarProbe">RoadSign</Attribute>
					<Operator>EQ</Operator>
					<Value>true</Value>
				</ValueCondition>
			</Condition>
			<Action>
				<VehicleAction>
					<Message>A Road Sign was detected</Message>
				</VehicleAction>
			</Action>
		</VehicleActionRule>			
		<!-- ************************************* -->
		<!-- RoadSignal -->
		<!-- ************************************* -->	
        <VehicleActionRule>
			<RuleType>4</RuleType>
			<RuleID>17</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="CarProbe">RoadSignal</Attribute>
					<Operator>NE</Operator>
					<Value></Value>
				</ValueCondition>
			</Condition>
			<Action>
				<VehicleAction>
					<Message>A Road Signal was detected</Message>
				</VehicleAction>
				<VehicleAction>
					<State>Edge</State>
					<Parameter>
						<Key>RoadSignalColor</Key>
						<Value>CarProbe.RoadSignal</Value>
					</Parameter>
				</VehicleAction>
			</Action>
		</VehicleActionRule>			
        <VehicleActionRule>
			<RuleType>4</RuleType>
			<RuleID>18</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="CarProbe">RoadSignal</Attribute>
					<Operator>EQ</Operator>
					<Value></Value>
				</ValueCondition>
				<ValueCondition>
					<Attribute object="Vehicle">Edge.RoadSignalColor@string</Attribute>
					<Operator>NE</Operator>
					<Value></Value>
				</ValueCondition>				
			</Condition>
			<Action>
				<VehicleAction>
					<Message>A Road Signal was not detected</Message>
				</VehicleAction>			
				<VehicleAction>
					<State>Edge</State>
					<Remove>
						<Key>RoadSignalColor</Key>
					</Remove>
				</VehicleAction>
			</Action>			
		</VehicleActionRule>
        <VehicleActionRule>
			<RuleType>4</RuleType>
			<RuleID>19</RuleID>
			<Description>Action for Execution</Description>
			<Target>
			</Target>
			<Execution>
				<Exec>
					<ComplexMethodClass>com.ibm.mobility.agent.sample.MovingAverageAcceleration</ComplexMethodClass>
					<Parameter>
						<Key>MaxRecord</Key>
						<Value>5</Value>
					</Parameter>
				</Exec>
			</Execution>			
			<Condition>
				<ValueCondition>
					<Attribute object="CarProbe">RoadSignal</Attribute>
					<Operator>NE</Operator>
					<Value></Value>
				</ValueCondition>				
				<ValueCondition>
					<Attribute object="Vehicle">Edge.RoadSignalColor@string</Attribute>
					<Operator>NE</Operator>
					<Value>CarProbe.RoadSignal</Value>
				</ValueCondition>				
			</Condition>
			<Action>
				<VehicleAction>
					<Message>A Road Signal Color was changed</Message>
					<Parameter>
						<Key>PrevColor</Key>
						<Value>Vehicle.Edge.RoadSignalColor</Value>
					</Parameter>
					<Parameter>
						<Key>Changed Color</Key>
						<Value>CarProbe.RoadSignal</Value>
					</Parameter>									
				</VehicleAction>
			</Action>
		</VehicleActionRule>		
</Rules>
